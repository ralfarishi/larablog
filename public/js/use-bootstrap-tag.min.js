var UseBootstrapTag=function(){"use strict";const g=[];function P(e){for(const t of e.dependencies)t.delete(e);e.dependencies.clear()}function q(e,t){t.add(e),e.dependencies.add(t)}function E(e){const t=new Set;function s(){const o=g[g.length-1];return o&&q(o,t),e}function r(o){e=o;for(const f of[...t])f.execute()}return[s,r]}function w(e){const t={execute(){P(t),g.push(t),e(),g.pop()},dependencies:new Set};t.execute()}function M(e,t){return e.length===t.length&&e.every((s,r)=>s===t[r])}function S(e,t){e.value=t,e.dispatchEvent(new Event("change"))}function O(e,t){const s=e.lastIndexOf(t);s!==-1&&e.splice(s,1)}function m(e,t){const s=document.createElement(e);if(t)for(const r in t)s[r]=t[r];return s}function V(e,t){return typeof e=="string"?e.split(t):Array.isArray(e)?e.flatMap(s=>typeof s=="string"?s.split(t):[]):[]}const L="use-bootstrap-tag",$=`${L}-target`;function U(e){const t=e.nextElementSibling;t&&t.classList.contains(L)&&t.remove();const s=m("div");e.insertAdjacentElement("afterend",s);const r=e.dataset,o={separator:r.ubTagSeparator||",",variant:r.ubTagVariant||"secondary",xPosition:r.ubTagXPosition||"right",transform:r.ubTagTransform||"input => input",isDuplicate:r.ubTagDuplicate!==void 0,max:+r.ubTagMax>0?+r.ubTagMax:void 0},f=()=>s.querySelectorAll("button"),A=n=>{n.classList.add("duplicate"),setTimeout(()=>{n.classList.remove("duplicate")},150)},H=()=>e.value,h=()=>H().split(o.separator).filter(n=>n!==""),I=n=>{const a=h(),c=V(n,o.separator);if(!o.max||a.length<o.max){const l=[];!o.isDuplicate&&a.forEach((i,p)=>c.includes(i)&&l.push(p));const u=[];c.forEach(i=>{a.includes(i)?o.isDuplicate&&u.push(i):u.push(i)}),a.push(...u),M(h(),a)||(S(e,a.join(o.separator)),u.forEach(i=>{const p=f()[a.lastIndexOf(i)],K=p.offsetHeight;p.style.height=0,setTimeout(()=>p.style.height=`${K}px`,0),setTimeout(()=>p.style.removeProperty("height"),150)})),o.isDuplicate||l.forEach(i=>A(f()[i]))}else c.length>0&&f().forEach(A)},j=n=>{const a=h();V(n,o.separator).forEach(l=>O(a,l)),M(h(),a)||S(e,a.join(o.separator))},x=e.classList,k=e.disabled;e.tabIndex=-1,x.add($);const[C,X]=E(e.value),[_,b]=E(!1),[d,B]=E(""),v=()=>C().split(o.separator).filter(n=>n.trim()!==""),z=()=>Function(`return ${o.transform}`)()(d().trim()),F=()=>v().length?"":e.placeholder;s.className=`${L} d-flex flex-wrap align-items-center gap-1 ${x.value}`.replace($,""),w(()=>{_()?s.classList.add("focus"):s.classList.remove("focus")});const y=()=>{var n;return(n=s.querySelector("input"))==null?void 0:n.focus()},D=n=>{n>=0&&j(v()[n])},N=(n=!1)=>{const a=z();a===""&&B(""),(d().includes(o.separator)||n&&d()!=="")&&(I(a.split(o.separator).filter(c=>c.trim()!=="")),B(""))},T=m("button",{type:"button",className:`align-items-center gap-1 d-inline-flex py-0 border-0 btn btn-${o.variant}`,disabled:k});x.contains("form-control-sm")&&T.classList.add("btn-sm"),x.contains("form-control-lg")&&T.classList.add("btn-lg"),o.xPosition==="left"&&T.classList.add("flex-row-reverse");const G=m("span",{className:"d-inline-flex",role:"button",tabIndex:-1,innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>'}),J=n=>{f().forEach(a=>a.remove()),n.reverse().forEach((a,c)=>{const l=n.length-1-c,u=T.cloneNode();if(u.innerHTML=a,u.onfocus=()=>{u.classList.add("active"),b(!0)},u.onblur=()=>{u.classList.remove("active"),b(!1)},u.onkeydown=({key:i})=>{if(i==="Backspace"||i==="Delete"){D(l);const p=i==="Backspace"?l-1:v().length===l?-1:l;p===-1?y():f()[p].focus()}},!k){const i=G.cloneNode(!0);i.onclick=()=>{D(l),y()},u.append(i)}s.prepend(u)})};if(w(()=>{J(v())}),!k){const n=m("div",{className:"input-wrapper"}),a=m("span"),c=m("input",{type:"text"});c.onfocus=()=>{b(!0)},c.onblur=()=>{b(!1),N(!0)},c.onkeydown=l=>{d()===""&&l.key==="Backspace"&&D(v().length-1),d()!==""&&l.key==="Enter"&&(N(!0),l.preventDefault())},c.oninput=()=>{B(c.value),N()},w(()=>{a.innerHTML=d()||F()||"i",c.placeholder=F(),c.value=d()}),n.append(a,c),s.append(n)}return s.onclick=n=>{n.target.tagName!=="BUTTON"&&y()},e.addEventListener("change",()=>{X(e.value)}),e.addEventListener("focus",y),{getValue:H,getValues:h,addValue:I,removeValue:j}}return U}();
